#!/usr/bin/env bash
set -euo pipefail

# Ensure we run from repo root even if CWD is nested
if repo_root=$(git rev-parse --show-toplevel 2>/dev/null); then
  cd "$repo_root"
fi

# Lightweight pre-commit (non-blocking)
# Run best-effort auto-fix; do NOT block commits.
echo "[pre-commit] (info) best-effort clippy auto-fix"
bash scripts/clippy_fix.sh || true
echo "[pre-commit] (info) skipping heavy lint; enforced at push"
exit 0
