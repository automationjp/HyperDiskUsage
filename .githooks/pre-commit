#!/usr/bin/env bash
set -euo pipefail

# Ensure we run from repo root even if CWD is nested
if repo_root=$(git rev-parse --show-toplevel 2>/dev/null); then
  cd "$repo_root"
fi

echo "[pre-commit] Running scripts/lint.sh (fmt + clippy)"
if ! bash scripts/lint.sh; then
  echo "[pre-commit] Lint failed. Commit aborted." >&2
  echo "Hint: fix issues or run with --no-verify (not recommended)." >&2
  exit 1
fi
echo "[pre-commit] Lint OK"

